"use strict";(self["webpackChunkv3_admin"]=self["webpackChunkv3_admin"]||[]).push([[729],{2885:function(e,i,a){a.d(i,{Z:function(){return c}});var n=a(6252),s=a(3577),t=a(2262),l=a(5879);const o={style:{"margin-bottom":"15px"}},r={style:{display:"flex","align-items":"center"}},d=(0,n._)("span",null,"切换权限：",-1);var u=(0,n.aZ)({emits:["change"],setup(e,{emit:i}){const a=(0,n.Fl)((()=>l.h.state.user.roles)),u=(0,t.iH)(a.value[0]);return(0,n.YP)(u,(async e=>{await l.h.dispatch("user/changeRoles",e),i("change")})),(e,i)=>{const l=(0,n.up)("el-radio-button"),m=(0,n.up)("el-radio-group");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",o," 你的权限："+(0,s.zw)((0,t.SU)(a)),1),(0,n._)("div",r,[d,(0,n.Wm)(m,{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=e=>u.value=e),size:"large"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"editor"}),(0,n.Wm)(l,{label:"admin"})])),_:1},8,["modelValue"])])])}}});const m=u;var c=m},4012:function(e,i,a){a.r(i),a.d(i,{default:function(){return A}});var n=a(6252),s=a(2262),t=a(5879);const l=e=>{if(e&&e instanceof Array&&e.length>0){const i=t.h.state.user.roles,a=e;return i.some((e=>a.includes(e)))}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1};var o=a(2885);const r={class:"app-container"},d={class:"permission-alert"},u=(0,n.Uk)(" 只有 "),m=(0,n.Uk)("admin"),c=(0,n.Uk)("可以看见这个 "),p=(0,n.Uk)(" v-permission=\"['admin']\" "),k={class:"permission-alert"},f=(0,n.Uk)(" 只有 "),w=(0,n.Uk)("editor"),g=(0,n.Uk)("可以看见这个 "),v=(0,n.Uk)(" v-permission=\"['editor']\" "),y={class:"permission-alert"},U=(0,n.Uk)(" 两者 "),_=(0,n.Uk)("admin"),h=(0,n.Uk)("和 "),b=(0,n.Uk)("editor"),W=(0,n.Uk)("都可以看见这个 "),C=(0,n.Uk)(" v-permission=\"['admin', 'editor']\" "),j=(0,n.Uk)(" 在某些情况下，不适合使用 v-permission。例如：Element 的 el-tab 或 el-table-column 以及其它动态渲染 dom 的场景。你只能通过手动设置 v-if 来实现。 "),z=(0,n.Uk)(" admin 可以看见这个 "),D=(0,n.Uk)(" v-if=\"checkPermission(['admin'])\" "),S=(0,n.Uk)(" editor 可以看见这个 "),x=(0,n.Uk)(" v-if=\"checkPermission(['editor'])\" "),P=(0,n.Uk)(" 两者 admin 和 editor 都可以看见这个 "),Z=(0,n.Uk)(" v-if=\"checkPermission(['admin', 'editor'])\" ");var q=(0,n.aZ)({setup(e){const i=(0,s.qj)({key:1,handleRolesChange:()=>{i.key++}});return(e,a)=>{const t=(0,n.up)("el-tag"),q=(0,n.up)("el-tab-pane"),R=(0,n.up)("el-tabs"),V=(0,n.Q2)("permission");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(o.Z,{onChange:(0,s.SU)(i).handleRolesChange},null,8,["onChange"]),((0,n.wg)(),(0,n.iD)("div",{key:(0,s.SU)(i).key,style:{"margin-top":"30px"}},[(0,n._)("div",null,[(0,n.wy)(((0,n.wg)(),(0,n.iD)("span",d,[u,(0,n.Wm)(t,{size:"large"},{default:(0,n.w5)((()=>[m])),_:1}),c])),[[V,["admin"]]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(t,{class:"permission-sourceCode",type:"info",size:"large"},{default:(0,n.w5)((()=>[p])),_:1})),[[V,["admin"]]])]),(0,n._)("div",null,[(0,n.wy)(((0,n.wg)(),(0,n.iD)("span",k,[f,(0,n.Wm)(t,null,{default:(0,n.w5)((()=>[w])),_:1}),g])),[[V,["editor"]]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(t,{class:"permission-sourceCode",type:"info",size:"large"},{default:(0,n.w5)((()=>[v])),_:1})),[[V,["editor"]]])]),(0,n._)("div",null,[(0,n.wy)(((0,n.wg)(),(0,n.iD)("span",y,[U,(0,n.Wm)(t,null,{default:(0,n.w5)((()=>[_])),_:1}),h,(0,n.Wm)(t,null,{default:(0,n.w5)((()=>[b])),_:1}),W])),[[V,["admin","editor"]]]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(t,{class:"permission-sourceCode",type:"info",size:"large"},{default:(0,n.w5)((()=>[C])),_:1})),[[V,["admin","editor"]]])])])),((0,n.wg)(),(0,n.iD)("div",{key:"checkPermission"+(0,s.SU)(i).key,style:{"margin-top":"60px"}},[(0,n.Wm)(t,{type:"info",size:"large"},{default:(0,n.w5)((()=>[j])),_:1}),(0,n.Wm)(R,{type:"border-card",style:{width:"550px","margin-top":"60px"}},{default:(0,n.w5)((()=>[(0,s.SU)(l)(["admin"])?((0,n.wg)(),(0,n.j4)(q,{key:0,label:"admin"},{default:(0,n.w5)((()=>[z,(0,n.Wm)(t,{class:"permission-sourceCode",type:"info"},{default:(0,n.w5)((()=>[D])),_:1})])),_:1})):(0,n.kq)("",!0),(0,s.SU)(l)(["editor"])?((0,n.wg)(),(0,n.j4)(q,{key:1,label:"editor"},{default:(0,n.w5)((()=>[S,(0,n.Wm)(t,{class:"permission-sourceCode",type:"info"},{default:(0,n.w5)((()=>[x])),_:1})])),_:1})):(0,n.kq)("",!0),(0,s.SU)(l)(["admin","editor"])?((0,n.wg)(),(0,n.j4)(q,{key:2,label:"admin 和 editor"},{default:(0,n.w5)((()=>[P,(0,n.Wm)(t,{class:"permission-sourceCode",type:"info"},{default:(0,n.w5)((()=>[Z])),_:1})])),_:1})):(0,n.kq)("",!0)])),_:1})]))])}}}),R=a(3744);const V=(0,R.Z)(q,[["__scopeId","data-v-b2f0cffe"]]);var A=V}}]);